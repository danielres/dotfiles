$mod = SUPER
$makina = CTRL ALT SHIFT SUPER # emitted by makina when pressing KEY_RIGHTCTRL

# LAPTOP ======================================================================

bindl=,switch:Lid Switch, exec, hyprlock

# MOUSE =======================================================================

bindm = $mod, mouse:272, movewindow # left click
bindm = $mod, mouse:273, resizewindow # right click
bindm = $mod, mouse:274, resizewindow # middle click

# WINDOWS + GROUPS + WORKSPACES ===============================================

# prioritize cycling within the current group before 
# moving focus to windows outside the group:
# binds:movefocus_cycles_groupfirst = true

bind = $makina,    F, exec, notify-send "makina" # TODO
bind = $mod,       G, togglegroup
bind = $mod CTRL,  H, changegroupactive, b  # Previous tab
bind = $mod CTRL,  L, changegroupactive, f # Next tab
bind = $mod SHIFT, G, lockactivegroup, toggle

bind = $mod,       H, movefocus, l
bind = $mod,       L, movefocus, r
bind = $mod,       K, movefocus, u
bind = $mod,       J, movefocus, d

bind = $mod SHIFT, H, movewindoworgroup, l
bind = $mod SHIFT, L, movewindoworgroup, r
bind = $mod SHIFT, K, movewindoworgroup, u
bind = $mod SHIFT, J, movewindoworgroup, d

bind = $mod,       F, fullscreen, 0
bind = $mod,       M, fullscreen, 1
bind = $mod,       Z, togglefloating
bind = $mod,       Z, centerwindow
bind = $mod SHIFT, Z, cyclenext, float

# kill + reload
bind = $mod,       Q, killactive,
bind = $mod SHIFT, R, exec, hyprctl reload
bind = $mod,       R, exec, pkill waybar;  waybar &
bind = $mod,       R, exec, pkill hyprpaper;  hyprpaper &
bind = $mod,       R, exec, pkill swaync; swaync &
bind = $mod,       R, exec, sleep 1; notify-send "Reloaded"
# bind = $mod,       R, exec, pkill makima; makima &
bind = $mod,       I, exec, swaync-client -t

# workspaces
bind = $mod,       1, workspace, 1
bind = $mod,       2, workspace, 2
bind = $mod,       3, workspace, 3
bind = $mod,       4, workspace, 4
bind = $mod,       5, workspace, 5
bind = $mod,       6, workspace, 6
bind = $mod,       7, workspace, 7
bind = $mod,       8, workspace, 8
bind = $mod,       9, workspace, 9

bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5
bind = $mod SHIFT, 6, movetoworkspace, 6
bind = $mod SHIFT, 7, movetoworkspace, 7
bind = $mod SHIFT, 8, movetoworkspace, 8
bind = $mod SHIFT, 9, movetoworkspace, 9

bind = $mod,       N, movetoworkspacesilent, special:minimized
bind = $mod SHIFT, N, togglespecialworkspace, minimized
bind = $mod,       P, exec, hypr-pull-window

bind = $mod SHIFT, period, exec, bash -lc 'n=$(hyprctl -j monitors | jq length); hyprctl dispatch movetoworkspace +$n'
bind = $mod SHIFT, comma,  exec, bash -lc 'n=$(hyprctl -j monitors | jq length); hyprctl dispatch movetoworkspace -$n'
bind = $mod,       period, exec, bash -lc 'n=$(hyprctl -j monitors | jq length); for ((i=0;i<n;i++)); do hyprctl dispatch workspace +$n; hyprctl dispatch focusmonitor +1; done'
bind = $mod,       comma,  exec, bash -lc 'n=$(hyprctl -j monitors | jq length); for ((i=0;i<n;i++)); do hyprctl dispatch workspace -$n; hyprctl dispatch focusmonitor +1; done'

# fastedit submap
bind   = $mod,  space,     exec, hyprctl keyword input:follow_mouse 1
bind   = $mod,  space,     exec, notify-send " ✅ Fastedit submap: on"
bind   = $mod,  space,     submap, fastedit
submap = fastedit
binde  = SHIFT, h,         resizeactive, -80 0
binde  = SHIFT, l,         resizeactive, 80 0
binde  = SHIFT, k,         resizeactive, 0 -80
binde  = SHIFT, j,         resizeactive, 0 80
binde  = CTRL,  h,         movewindoworgroup, l
binde  = CTRL,  l,         movewindoworgroup, r
binde  = CTRL,  k,         movewindoworgroup, u
binde  = CTRL,  j,         movewindoworgroup, d
bind   =,       h,         sendshortcut, , left,
bind   =,       l,         sendshortcut, , right,
bind   =,       k,         sendshortcut, , up,
bind   =,       j,         sendshortcut, , down,
# bind   = SHIFT, k,         sendshortcut, , page_up,
# bind   = SHIFT, j,         sendshortcut, , page_down,
bind   = $mod,  mouse:274, killactive
bind   =,       escape,    exec, hyprctl keyword input:follow_mouse 2
bind   =,       escape,    exec, notify-send " ❌ Fastedit submap: off"
bind   =,       escape,    submap, reset
submap = reset

# APPS ========================================================================

bind  = $mod,       O,       exec, jsonmenu system
bind  = $mod SHIFT, O,       exec, jsonmenu
bind  = $mod SHIFT, P,       exec, jsonmenu projects
bind  = $mod,       V,       exec, cliphist list | fuzzel --dmenu | cliphist decode | wl-copy
bind  = $mod,       T,       exec, wezterm
bind  = $mod,       D,       exec, fuzzel
bindr = $mod,       SUPER_L, exec, sh -c 'pkill -x fuzzel || (fuzzel >/dev/null 2>&1 &)'
bindr = $mod,       SUPER_R, exec, sh -c 'pkill -x fuzzel || (fuzzel >/dev/null 2>&1 &)'
bind  = $mod,       E,       exec, nautilus
bind  = $mod,       X,       hyprexpo:expo, toggle

# Screenshots
bind =,       Print, exec, sh -lc 'dir="$HOME/Pictures/Screenshots"; mkdir -p "$dir"; file="$dir/$(date +%F_%T).png"; grim "$file" && wl-copy < "$file" && notify-send "Screenshot" "Saved to $file and copied to clipboard" --action="Open" && sleep 0.1 && xdg-open "$file" &'
bind = SHIFT, Print, exec, sh -lc 'dir="$HOME/Pictures/Screenshots"; mkdir -p "$dir"; file="$dir/$(date +%F_%T).png"; slurp | grim -g - "$file" && wl-copy < "$file" && notify-send "Screenshot" "Saved to $file and copied to clipboard" --action=:"Open" && sleep 0.1 && xdg-open "$file" &'

# Volume (PipeWire via Pulse)
binde =, XF86AudioLowerVolume,  exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%-
binde =, XF86AudioRaiseVolume,  exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
bind  =, XF86AudioMute,         exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bind  =, XF86AudioMicMute,      exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Brightness
bind  =, XF86MonBrightnessDown, exec, brightnessctl set 5%-
bind  =, XF86MonBrightnessUp,   exec, brightnessctl set +5%

# Media
bind  =, XF86AudioPlay,         exec, playerctl play-pause
bind  =, XF86AudioNext,         exec, playerctl next
bind  =, XF86AudioPrev,         exec, playerctl previous


###### ========================================================================

$bluetoothman = blueman-manager
$browser      = firefox
$fileManager  = nautilus
$musicPlayer  = youtube-music
$pdfreader    = zathura
$terminal     = wezterm

bind         = $mod,  Return, submap, launch
$resetSubMap = hyprctl dispatch submap reset
submap       = launch
bind         =,       Return, exec,   $terminal                 & $resetSubMap
bind         =,       w,      exec,   $browser                  & $resetSubMap
bind         =,       m,      exec,   $musicPlayer              & $resetSubMap
bind         = SHIFT, w,      exec,   $browser --private-window & $resetSubMap
bind         =,       e,      exec,   $fileManager              & $resetSubMap
bind         =,       o,      exec,   $pdfreader                & $resetSubMap
bind         =,       b,      exec,   $bluetoothman             & $resetSubMap
bind         =,       Escape, exec,   $resetSubMap
submap       = reset
