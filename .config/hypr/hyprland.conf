

source = ~/.config/hypr/monitors.conf
source = ~/.config/hypr/workspaces.conf
# monitor = desc:GIGA-BYTE TECHNOLOGY CO. LTD. M28U, preferred, 0x0, auto
# monitor = eDP-1, preferred, auto-left, 1.8
# monitor = desc:AOC 2243W, preferred, auto-right, auto

plugin = $HOME/.config/hypr/plugins/hyprbars.so
plugin = $HOME/.config/hypr/plugins/hyprexpo.so

misc {
  new_window_takes_over_fullscreen = 2 # 1: New window takes over, 2: Unfullscreen/unmaximize current window
  enable_swallow = true
  swallow_regex = ^(org.wezfurlong.wezterm)$
}


windowrule = idleinhibit fullscreen, class:.*
windowrule = bordercolor rgb(339999), fullscreenstate:* 1

plugin:hyprbars {
  enabled = true
  bar_part_of_window = true
  bar_precedence_over_border = true
  bar_height = 20
  bar_color = rgba(00000066)
  bar_blur = true
  bar_padding = 7
  col.text = rgba(ffffffcc)
  bar_title_enabled = true
  bar_text_size = 10
  hyprbars-button = rgba(00000000), 22, , hyprctl dispatch killactive, rgb(ffffff)
  hyprbars-button = rgba(00000000), 22, 󰊓, hyprctl dispatch fullscreen 1, rgb(ffffff)
  bar_button_padding = 7
  icon_on_hover = true
}

plugin:hyprexpo {
  columns = 3
  gap_size = 5
  bg_col = rgb(111111)
  workspace_method = center current # [center/first] [workspace] e.g. first 1 or center m+1

  enable_gesture = true # laptop touchpad
  gesture_fingers = 3  # 3 or 4
  gesture_distance = 300 # how far is the "max"
  gesture_positive = true # positive = swipe down. Negative = swipe up.
}


exec-once = hypridle
exec-once = hyprpaper &
exec-once = mako &
exec-once = waybar &
exec-once = hyprsunset &
exec-once = syshud &
exec-once = wl-paste --type text --watch cliphist store # Stores only text data
exec-once = wl-paste --type image --watch cliphist store # Stores only image data
exec-once = hyprctl setcursor "Nordzy-cursors" 30

input {
  kb_layout = us
  kb_variant = altgr-intl
  kb_options = caps:swapescape
  follow_mouse = 2
  touchpad {
    disable_while_typing = true
    natural_scroll = false
    tap-to-click = true
    scroll_factor = 1.0
  }
}

general {
  gaps_in = 0
  gaps_out = 0
  border_size = 2
  layout = dwindle
  col.active_border = rgb(cdd6f4)
  col.inactive_border = rgba(595959aa)
}

cursor {
  no_warps = true
}

decoration {
  rounding = 4
  blur {
    enabled = true
    size = 6
    passes = 3
  }
}

layerrule = blur, wofi
layerrule = blur, waybar
layerrule = xray, wofi
layerrule = xray, waybar
layerrule = noanim, wofi

animations {
  enabled = true
  animation = windows, 1, 1.1, default
  animation = border, 1, 1.1, default
  animation = fade, 1, 1.1, default
  animation = workspaces, 1, 1.1, default
}

dwindle {
  pseudotile = true
  preserve_split = true
}

misc {
  disable_splash_rendering = true
  focus_on_activate = false
}

bindl=,switch:Lid Switch, exec, hyprlock 

$mod = SUPER

# Extra examples:
# binds = Control_L, A&Z, exec, wezterm
# bind = Control_R, F, exec, firefox
# bind = Control_R, o, exec, obsidian
# binds = MOD5, A&Z, exec, wezterm
# binds = MOD5, Q&W, exec, firefox

bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow
bindm = $mod, mouse:274, closeActive

bind = $mod, V, exec, cliphist list | wofi --dmenu | cliphist decode | wl-copy
bind = $mod, g, hyprexpo:expo, toggle

bind = $mod, R, exec, pkill waybar; waybar &
bind = $mod, T, exec, wezterm
bind = $mod, D, exec, pkill wofi; wofi --show drun
bind = $mod, E, exec, nautilus
# bind = $mod, L, exec, hyprlock
bind = $mod, Q, killactive,
bind = $mod, F, fullscreen, 0
bind = $mod, M, fullscreen, 1
bind = $mod, Z, togglefloating
bind = $mod, Z, centerwindow
bind = $mod SHIFT, Z, cyclenext, float
bind = $mod SHIFT, R, exec, hyprctl reload
bind = $mod, H, movefocus, l
bind = $mod, L, movefocus, r
bind = $mod, K, movefocus, u
bind = $mod, J, movefocus, d
bind = $mod SHIFT, H, movewindow, l
bind = $mod SHIFT, L, movewindow, r
bind = $mod SHIFT, K, movewindow, u
bind = $mod SHIFT, J, movewindow, d

# bind = $mod SHIFT, 1, workspace, 1
# bind = $mod SHIFT, 2, workspace, 2
# bind = $mod SHIFT, 3, workspace, 3
# bind = $mod SHIFT, 4, workspace, 4
# bind = $mod SHIFT, 5, workspace, 5
# bind = $mod SHIFT, 6, workspace, 6
# bind = $mod SHIFT, 7, workspace, 7
# bind = $mod SHIFT, 8, workspace, 8
# bind = $mod SHIFT, 9, workspace, 9

# bind = $mod, 1, focusworkspaceoncurrentmonitor, 1
# bind = $mod, 2, focusworkspaceoncurrentmonitor, 2
# bind = $mod, 3, focusworkspaceoncurrentmonitor, 3
# bind = $mod, 4, focusworkspaceoncurrentmonitor, 4
# bind = $mod, 5, focusworkspaceoncurrentmonitor, 5
# bind = $mod, 6, focusworkspaceoncurrentmonitor, 6
# bind = $mod, 7, focusworkspaceoncurrentmonitor, 7
# bind = $mod, 8, focusworkspaceoncurrentmonitor, 8
# bind = $mod, 9, focusworkspaceoncurrentmonitor, 9

bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9

bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5
bind = $mod SHIFT, 6, movetoworkspace, 6
bind = $mod SHIFT, 7, movetoworkspace, 7
bind = $mod SHIFT, 8, movetoworkspace, 8
bind = $mod SHIFT, 9, movetoworkspace, 9

bind = $mod, N, movetoworkspacesilent, special:minimized
bind = $mod SHIFT, N, togglespecialworkspace, minimized
bind = $mod, P, exec, /home/daniel/dotfiles/.config/hypr/scripts/pull-window.sh

bind = $mod SHIFT, period, exec, bash -lc 'n=$(hyprctl -j monitors | jq length); hyprctl dispatch movetoworkspace +$n'
bind = $mod SHIFT, comma,  exec, bash -lc 'n=$(hyprctl -j monitors | jq length); hyprctl dispatch movetoworkspace -$n'
bind = $mod, period, exec, bash -lc 'n=$(hyprctl -j monitors | jq length); for ((i=0;i<n;i++)); do hyprctl dispatch workspace +$n; hyprctl dispatch focusmonitor +1; done'
bind = $mod, comma,  exec, bash -lc 'n=$(hyprctl -j monitors | jq length); for ((i=0;i<n;i++)); do hyprctl dispatch workspace -$n; hyprctl dispatch focusmonitor +1; done'

# Screenshots
bind = , Print, exec, sh -lc 'dir="$HOME/Pictures/Screenshots"; mkdir -p "$dir"; file="$dir/$(date +%F_%T).png"; grim "$file" && wl-copy < "$file" && notify-send "Screenshot" "Saved to $file and copied to clipboard" --action="Open" && sleep 0.1 && xdg-open "$file" &'
bind = SHIFT, Print, exec, sh -lc 'dir="$HOME/Pictures/Screenshots"; mkdir -p "$dir"; file="$dir/$(date +%F_%T).png"; slurp | grim -g - "$file" && wl-copy < "$file" && notify-send "Screenshot" "Saved to $file and copied to clipboard" --action=:"Open" && sleep 0.1 && xdg-open "$file" &'


# Volume (PipeWire via Pulse)
binde = , XF86AudioLowerVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%-
binde = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 5%+
bind = , XF86AudioMute,        exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bind = , XF86AudioMicMute,     exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Brightness
bind = , XF86MonBrightnessDown, exec, brightnessctl set 5%-
bind = , XF86MonBrightnessUp,   exec, brightnessctl set +5%

# Media (optional)
bind = , XF86AudioPlay,  exec, playerctl play-pause
bind = , XF86AudioNext,  exec, playerctl next
bind = , XF86AudioPrev,  exec, playerctl previous

$bluetoothman = blueman-manager
$browser = firefox
$fileManager = nautilus
$musicPlayer = youtube-music
$pdfreader = zathura
$terminal = wezterm

bind = $mod, Return, submap, launch
$resetSubMap = hyprctl dispatch submap reset
submap = launch
bind = $mod, Return, exec, $terminal & $resetSubMap
bind = $mod, w, exec, $browser & $resetSubMap
bind = $mod, m, exec, $musicPlayer & $resetSubMap
bind = $mod SHIFT, w, exec, $browser --private-window & $resetSubMap
bind = $mod, e, exec, $fileManager & $resetSubMap
bind = $mod , o, exec, $pdfreader & $resetSubMap
bind = $mod , b, exec, $bluetoothman & $resetSubMap
# bind = ,PRINT,exec, $flameshot_full & $resetSubMap
# bind = $mod,PRINT, exec, $flameshot_gui & $resetSubMap
bind = , Escape,exec, $resetSubMap
submap = reset

bind = $mod, space, submap, fastedit
submap = fastedit
binde = , h, resizeactive, -80 0
binde = , l, resizeactive, 80 0
binde = , k, resizeactive, 0 -80
binde = , j, resizeactive, 0 80
binde = ALT, h, movewindow, l
binde = ALT, l, movewindow, r
binde = ALT, k, movewindow, u
binde = ALT, j, movewindow, d
bind = , escape, submap, reset
submap = reset
